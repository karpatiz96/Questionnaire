<h2>Questionnaire Details</h2>
<div class="row mt-4">
  <app-alert id="alert-1" class="col-sm-8"></app-alert>
</div>
<div class="row mt-4">
    <div class="col-sm-12">
        <dl class="row mt-4">
            <dt class="col-sm-2"><h5>Title:</h5></dt>
            <dd class="col-sm-4"><h5>{{questionnaire.title}}</h5></dd>
            <dd class="col-sm-4" *ngIf="questionnaire.visibleToGroup"><a class="btn btn-outline-danger" (click)="hide(questionnaire.id)">Hide Questionnaire</a></dd>
            <dd class="col-sm-4" *ngIf="!questionnaire.visibleToGroup"><a class="btn btn-outline-success" (click)="show(questionnaire.id)">Show Questionnaire</a></dd>
        </dl>
        <div class="row mt-4">
            <h5 class="col-sm-3">Group Description:</h5>
        </div>
        <div class="card offset-2 col-sm-6">
            <div class="card-body">{{questionnaire.description}}</div>
        </div>
        <dl class="row mt-3">
            <dt class="col-sm-2">Beginig:</dt>
            <dd class="col-sm-2">{{questionnaire.begining | date: 'yyyy-MM-dd hh:mm'}}</dd>
            <dt class="col-sm-2">Finish:</dt>
            <dd class="col-sm-2">{{questionnaire.finish | date: 'yyyy-MM-dd hh:mm'}}</dd>
        </dl>
        <dl class="row mt-3">
            <dt class="col-sm-2">Created:</dt>
            <dd class="col-sm-2">{{questionnaire.created | date: 'yyyy-MM-dd hh:mm'}}</dd>
            <dt class="col-sm-2">Last Edited:</dt>
            <dd class="col-sm-2">{{questionnaire.lastEdited | date: 'yyyy-MM-dd hh:mm'}}</dd>
        </dl>
        <div class="row mt-3">
            <div class="ml-5">
                <input type="checkbox" class="form-check-input" [checked]="questionnaire.visibleToGroup" />
                <label for="visibleToGroup" class="form-check-label">Visible to group</label>
            </div>
        </div>
        <div class="row mt-3" *ngIf="!questionnaire.visibleToGroup">
            <a class="btn btn-outline-primary offset-6 col-sm-1" [routerLink]="['/questionnaire/edit', questionnaire.id]">Edit</a>
        </div>
    </div>
</div>
<h4 class="mt-3">Questions</h4>
<div class="row mt-3">
    <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col" sortable="number" (sort)="onSort($event)">Number</th>
            <th scope="col" sortable="name" (sort)="onSort($event)">Name</th>
            <th scope="col" sortable="type" (sort)="onSort($event)">Type</th>
            <th scope="col" sortable="value" (sort)="onSort($event)">Points</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let question of questions">
            <th scope="row"></th>
            <td>{{question.number}}</td>
            <td>{{question.name}}</td>
            <td>{{QuestionTypes[question.type]}}</td>
            <td>{{question.value}}</td>
            <td><a class="btn btn-outline-primary" [routerLink]="['/questionnaire/question', question.id]">Details</a></td>
            <td><a class="btn btn-outline-primary" *ngIf="!questionnaire.visibleToGroup" [routerLink]="['/questionnaire/question/edit', question.id]">Edit</a></td>
            <td><a class="btn btn-outline-primary" *ngIf="!questionnaire.visibleToGroup" (click)="delete(question)">Delete</a></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td scope="col"><a class="btn btn-outline-success" *ngIf="!questionnaire.visibleToGroup" [routerLink]="['/questionnaire/question/add', questionnaire.id]">Create</a></td>
          </tr>
        </tbody>
      </table>
      <div class="d-flex justify-content-between">
        <ngb-pagination
          [collectionSize]="total" [(page)]="page" [pageSize]="pageSize" (pageChange)="refressQuestions()">
        </ngb-pagination>
    
        <select class="custom-select ml-2" style="width: auto" name="pageSize" [(ngModel)]="pageSize" (ngModelChange)="refressQuestions()">
          <option [ngValue]="2">2 items per page</option>
          <option [ngValue]="4">4 items per page</option>
          <option [ngValue]="10">10 items per page</option>
        </select>
      </div>
</div>